<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>.Conf File Template Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        input, textarea {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 14px;
        }

        button {
            padding: 12px 20px;
            cursor: pointer;
            margin-bottom: 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
        }

        #template {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 20px;
            white-space: pre-wrap;
            background-color: #fff;
        }

        #serverAliasContainer {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        #serverAliasInput {
            width: 200px;
            margin-right: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 14px;
        }

        #serverAlias {
            color: green;
            font-weight: bold;
        }

        h1, h2 {
            color: #4CAF50;
            text-align: center;
        }

        #result {
            margin-top: 10px;
            font-weight: bold;
            font-size: 16px;
        }
    </style>
</head>
<body>

    <h1>.Conf File Template Generator</h1>

    <label for="requestNumber">Enter Change Number:</label>
    <input type="text" id="requestNumber" placeholder="e.g., CHG123">

    <label for="inputText">Enter Source URL:</label>
    <textarea id="inputText" placeholder="Enter your source"></textarea>

    <label for="inputString">Enter Destination URL:</label>
    <textarea id="inputString" placeholder="Enter your destination"></textarea>

    <div id="serverAliasContainer">
        <label for="serverAliasInput">Enter ServerAlias If You Want To Add </label>
        <input type="text" id="serverAliasInput" placeholder="e.g., www.example.com">
    </div>

    <button onclick="applyText(), getRequestNumber(), getServerAliasInput(), applyText(), modifyString()">Generate .Conf Template</button>

    <h2>Result:</h2>
    <p id="result"></p>

    <h2>Template:</h2>
<div id="template">&lt;VirtualHost *&gt;<br>
#Request number <div id="CRQno"></div><br>
#ServerName is Mandatory - www-test.example.com or myapp-test.merck.com<br>
ServerName <div id="customText"></div><br>
#ServerAlias is available for use - example.com or merck.com<br>
<div id="serverAliasContainer">#ServerAlias<div id="serverAlias"></div></div><br>
#Replace URL with requestor URL - Redirect / www-test.example.com or Redirect / myapp-test.merck.com<br>
RewriteEngine on<br>
RewriteRule ^/ <div id="new_destination"></div> [R=301,NC,NE]<br>
&lt;/VirtualHost&gt;</div>

   

    <button onclick="downloadText()">Download .Conf File</button>

    <script>
        // JavaScript functions remain unchanged
        function modifyString() {
            var inputString = document.getElementById('inputString').value;
            var modificationOption = "addBackslash";
            var resultElement = document.getElementById('result');
            var newDestinationDiv = document.getElementById('new_destination');

            var specialChar = "=,?,@,#,%,&,!$";

            switch (modificationOption) {
                case 'addBackslash':
                    var regex = new RegExp('[' + specialChar + ']', 'g');
                    var modifiedString = inputString.replace(regex, '\\$&');
                    resultElement.innerText = modifiedString;

                    // Copy the modified string to the new_destination div
                    newDestinationDiv.innerText = modifiedString;
                    break;
                default:
                    resultElement.innerText = 'Invalid modification option';
            }
        }

        function applyText() {
            // Get the input text
            var inputText = document.getElementById('inputText').value;

            // Apply the input text to the template
            var customTextDiv = document.getElementById('customText');
            customTextDiv.textContent = inputText;
        }

        function getServerAliasInput() {
 // Prompt the user for ServerAlias input
 var serverAliasInput = document.getElementById('serverAliasInput').value;

// Update the #ServerAlias div with the user input and remove the #
var serverAliasDiv = document.getElementById('serverAlias');
var serverAliasContainer = document.getElementById('serverAliasContainer');

if (serverAliasInput.trim() !== '') {
    // ServerAlias is not empty, remove the '#' symbol
    serverAliasDiv.textContent = serverAliasInput;
    serverAliasContainer.innerHTML = 'ServerAlias <div id="serverAlias">' + serverAliasInput + '</div>';
} else {
    // ServerAlias is empty, keep the '#' symbol
    serverAliasDiv.textContent = '';
    serverAliasContainer.innerHTML = '#ServerAlias <div id="serverAlias"></div>';
}


            // // Prompt the user for ServerAlias input
            // var serverAliasInput = document.getElementById('serverAliasInput').value;

            // // Update the #ServerAlias div with the user input and remove the #
            // var serverAliasDiv = document.getElementById('serverAlias');
            // var serverAliasContainer = document.getElementById('serverAliasContainer');

            // if (serverAliasInput.trim() !== '') {
            //     serverAliasDiv.textContent = serverAliasInput;
            //     serverAliasContainer.innerHTML = 'ServerAlias <div id="serverAlias">' + serverAliasInput + '</div>';
            // } else {
            //     // ServerAlias is empty, remove the content
            //     serverAliasDiv.textContent = '';
            //     serverAliasContainer.innerHTML = '';
            // }
        }

        function getRequestNumber() {
            // Get the input value
            var requestNumber = document.getElementById('requestNumber').value;

            // Apply the input value to the template
            var requestNumberDiv = document.getElementById('CRQno');
            requestNumberDiv.textContent = requestNumber;
        }

        function downloadText() {
            // Get the content of the template with the applied text
            var templateContent = document.getElementById('template').textContent;

            // Get the input text
            var inputTextValue = document.getElementById('inputText').value;

            // Create a Blob (binary large object) from the template content
            var blob = new Blob([templateContent], { type: 'text/plain' });

            // Create a link element
            var downloadLink = document.createElement('a');

            // Set the download attribute with the filename (using inputText value)
            downloadLink.download = inputTextValue + '.conf';

            // Create a URL for the Blob and set it as the href attribute of the link
            downloadLink.href = window.URL.createObjectURL(blob);

            // Append the link to the document
            document.body.appendChild(downloadLink);

            // Trigger a click event on the link to start the download
            downloadLink.click();

            // Remove the link from the document
            document.body.removeChild(downloadLink);
        }
    </script>
</body>
</html>
